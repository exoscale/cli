# Test: Interactive config add making new account the default
# Tests adding a second account and choosing to make it the new default.

# Create initial config with one account
mkdir -p .config/exoscale
cp initial-config.toml .config/exoscale/exoscale.toml

# Add second account and make it default (answer 'y' to prompt)
execpty --stdin=inputs exo config add
stdout 'Set \[NewDefault\] as default account'

# Verify both accounts exist
exec exo config list
stdout 'FirstAccount'
stdout 'NewDefault'

# Verify new account is now default
stdout 'NewDefault\*'
! stdout 'FirstAccount\*'

-- inputs --
EXOnewdefault789
secretNew789
NewDefault
@enter
y

-- initial-config.toml --
defaultAccount = "FirstAccount"

[[accounts]]
account = "FirstAccount"
defaultZone = "ch-gva-2"
key = "EXOfirst123"
name = "FirstAccount"
secret = "secretFirst123"
